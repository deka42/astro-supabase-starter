<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immobilien Steuervergleich</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
        color: white;
        padding: 30px;
        text-align: center;
    }

    .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        font-weight: 300;
    }

    .subtitle {
        font-size: 1.2em;
        opacity: 0.9;
    }

    .main-content {
        display: grid;
        grid-template-columns: 400px 1fr;
        min-height: 600px;
    }

    .input-section {
        background: #f8f9fa;
        padding: 30px;
        border-right: 2px solid #e9ecef;
    }

    .results-section {
        padding: 30px;
    }

    .input-group {
        margin-bottom: 25px;
    }

    .input-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
        font-size: 0.95em;
    }

    .input-group input, .input-group select {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.3s ease;
    }

    .input-group input:focus, .input-group select:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .calculate-btn {
        width: 100%;
        padding: 15px;
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
    }

    .calculate-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
    }

    .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-top: 20px;
    }

    .result-card {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
        border-radius: 15px;
        padding: 25px;
        border: 2px solid #e9ecef;
        transition: all 0.3s ease;
    }

    .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        border-color: #3498db;
    }

    .result-card h3 {
        color: #2c3e50;
        margin-bottom: 20px;
        text-align: center;
        font-size: 1.4em;
        font-weight: 600;
    }

    .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid #e9ecef;
    }

    .result-item:last-child {
        border-bottom: none;
        font-weight: 600;
        font-size: 1.1em;
        margin-top: 10px;
        padding-top: 20px;
        border-top: 2px solid #3498db;
    }

    .result-label {
        color: #2c3e50;
        font-weight: 500;
    }

    .result-value {
        font-weight: 600;
        color: #27ae60;
    }

    .result-value.negative {
        color: #e74c3c;
    }

    .warning {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        color: #856404;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        font-size: 0.9em;
    }

    .comparison-table {
        width: 100%;
        margin-top: 30px;
        border-collapse: collapse;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }

    .comparison-table th,
    .comparison-table td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #e9ecef;
        font-size: 0.9em;
    }

    .comparison-table th {
        background: #3498db;
        color: white;
        font-weight: 600;
        text-align: center;
    }

    .comparison-table tr:hover {
        background: #f8f9fa;
    }

    .best-option {
        background: #d4edda !important;
        border-left: 4px solid #27ae60;
    }

    @media (max-width: 1200px) {
        .main-content {
            grid-template-columns: 1fr;
        }
        
        .input-section {
            border-right: none;
            border-bottom: 2px solid #e9ecef;
        }
    }

    @media (max-width: 768px) {
        .results-grid {
            grid-template-columns: 1fr;
        }
        
        .header h1 {
            font-size: 2em;
        }
        
        .container {
            margin: 10px;
            border-radius: 15px;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè† Immobilien Steuervergleich</h1>
            <div class="subtitle">Vergleich des VERKAUFS durch verschiedene Strukturen (nicht Einbringung)</div>
        </div>

```
    <div class="main-content">
        <div class="input-section">
            <div class="warning">
                ‚ö†Ô∏è Hinweis: Diese Berechnung dient nur zur groben Orientierung. F√ºr steuerliche Beratung konsultieren Sie einen Steuerberater.
            </div>
            
            <div class="warning" style="background: #ffebee; border-color: #ffcdd2; color: #c62828;">
                üö® <strong>Steuerfreiheit richtig verstehen - Einbringung vs. Verkauf:</strong>
                <br><br><strong>¬ß 23 EStG (10-Jahres-Frist) f√ºr private Ver√§u√üerungsgesch√§fte:</strong>
                <br>‚Ä¢ <strong>Privatpersonen:</strong> Steuerfrei nach 10 Jahren
                <br>‚Ä¢ <strong>Verm√∂gensverwaltende Personengesellschaften:</strong> Transparente Besteuerung (¬ß 39 Abs. 2 Nr. 2 AO)
                <br><br><strong>Einbringung in GmbH/UG:</strong>
                <br>‚Ä¢ <strong>Nach 10 Jahren Privatbesitz:</strong> Einbringung kann steuerfrei sein
                <br>‚Ä¢ <strong>Unter 10 Jahren:</strong> Einbringung steuerpflichtig
                <br><br><strong>Verkauf durch GmbH/UG:</strong>
                <br>‚Ä¢ <strong>Immer steuerpflichtig:</strong> ~48-50% Gesamtbelastung
                <br>‚Ä¢ <strong>¬ß 23 EStG gilt nicht:</strong> Immobilie ist Betriebsverm√∂gen
                <br>‚Ä¢ <strong>¬ß 8b KStG gilt nicht:</strong> Nur f√ºr Anteile an anderen Gesellschaften
            </div>

            <div class="warning" style="background: #e3f2fd; border-color: #bbdefb; color: #1565c0; margin-top: 20px;">
                üí° <strong>Strategische Empfehlung f√ºr Immobilieninvestoren (Update 2025):</strong>
                <br><br><strong>ü•á OPTIMAL (nach Haltedauer):</strong>
                <br>‚Ä¢ <strong>0-10 Jahre:</strong> VV GmbH & Co. KG (transparente Besteuerung + Gewerbesteueranrechnung)
                <br>‚Ä¢ <strong>Ab 10 Jahren:</strong> Privatverkauf oder VV GbR (0% Steuern)
                <br>‚Ä¢ <strong>Langfristig:</strong> VV GmbH & Co. KG (nach 10 Jahren steuerfrei + BFH-Gewerbesteuerbefreiung!)
                <br><br><strong>üö´ VERMEIDEN bei Immobilien:</strong>
                <br>‚Ä¢ <strong>Reine GmbH/UG:</strong> Immer ~48-50% Steuerbelastung
                <br>‚Ä¢ <strong>Gewerbliche Strukturen:</strong> Keine 10-Jahres-Steuerfreiheit
                <br><br><strong>‚ö° Der Game-Changer:</strong> VV GmbH & Co. KG kombiniert Steuerfreiheit nach 10 Jahren mit Haftungsbegrenzung!
                <br><br><strong>üÜï WICHTIGE NEUERUNGEN 2024/2025:</strong>
                <br>‚Ä¢ <strong>BFH-Urteil:</strong> "Aufw√§rts abgef√§rbte" VV Personengesellschaften sind gewerbesteuerfrei!
                <br>‚Ä¢ <strong>Gesellschafterdarlehen:</strong> Steuerrechtlich nicht mehr anerkannt (BFH I R 21/22)
                <br>‚Ä¢ <strong>Finanzierung:</strong> Kapitalkonto oder externe Finanzierung erforderlich
            </div>

            <div class="input-group">
                <label for="kaufpreis">Kaufpreis (‚Ç¨)</label>
                <input type="number" id="kaufpreis" value="300000" min="0">
            </div>

            <div class="input-group">
                <label for="verkaufspreis">Verkaufspreis (‚Ç¨)</label>
                <input type="number" id="verkaufspreis" value="450000" min="0">
            </div>

            <div class="input-group">
                <label for="nebenkosten_kauf">Nebenkosten Kauf (‚Ç¨)</label>
                <input type="number" id="nebenkosten_kauf" value="30000" min="0">
            </div>

            <div class="input-group">
                <label for="nebenkosten_verkauf">Nebenkosten Verkauf (‚Ç¨)</label>
                <input type="number" id="nebenkosten_verkauf" value="22500" min="0">
            </div>

            <div class="input-group">
                <label for="modernisierung">Modernisierung/Renovierung (‚Ç¨)</label>
                <input type="number" id="modernisierung" value="50000" min="0">
            </div>

            <div class="input-group">
                <label for="haltedauer">Haltedauer (Jahre)</label>
                <input type="number" id="haltedauer" value="8" min="0">
            </div>

            <div class="input-group">
                <label for="einbringung_nach_jahren">Urspr√ºnglich private Haltedauer vor Einbringung (Jahre) - optional</label>
                <input type="number" id="einbringung_nach_jahren" placeholder="z.B. 3 = 3 Jahre privat, dann eingebracht" min="0">
                <small style="color: #6c757d; font-size: 0.8em;">
                    <strong>Beispiel:</strong> 12 Jahre private Haltung ‚Üí Einbringung steuerfrei (¬ß23 EStG). Verkauf durch GmbH dennoch steuerpflichtig!
                </small>
            </div>

            <div class="input-group">
                <label for="persoenlicher_steuersatz">Pers√∂nlicher Steuersatz (%)</label>
                <input type="number" id="persoenlicher_steuersatz" value="42" min="0" max="47" step="0.1">
            </div>

            <div class="input-group">
                <label for="kirchensteuer">Kirchensteuer (%)</label>
                <input type="number" id="kirchensteuer" value="8" min="0" max="9" step="0.1">
            </div>

            <button class="calculate-btn" onclick="berechnen()">üìä Berechnung durchf√ºhren</button>
        </div>

        <div class="results-section">
            <div id="results-container">
                <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Ergebnisse der Steuerberechnung</h2>
                <div class="results-grid" id="results-grid">
                    <!-- Ergebnisse werden hier eingef√ºgt -->
                </div>
                <table class="comparison-table" id="comparison-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>Struktur</th>
                            <th>Nettogewinn</th>
                            <th>Steuern</th>
                            <th>Steuerquote</th>
                            <th>Besonderheiten</th>
                        </tr>
                    </thead>
                    <tbody id="comparison-body">
                        <!-- Vergleichstabelle wird hier eingef√ºgt -->
                    </tbody>
                </table>
                
                <div class="warning" style="background: #e8f5e8; border-color: #c8e6c9; color: #2e7d32; margin-top: 30px;">
                    üèÜ <strong>VV GmbH & Co. KG vs. Reine GmbH - Der entscheidende Unterschied (Update 2025):</strong>
                    <br><br><strong>VV GmbH & Co. KG (Personengesellschaft):</strong>
                    <br>‚Ä¢ ‚úÖ <strong>Nach 10 Jahren STEUERFREI</strong> (¬ß23 EStG gilt)
                    <br>‚Ä¢ ‚úÖ <strong>BFH 2025: GEWERBESTEUERFREI</strong> als "aufw√§rts abgef√§rbte" Struktur
                    <br>‚Ä¢ ‚úÖ <strong>Transparente Besteuerung</strong> - keine Doppelbesteuerung
                    <br>‚Ä¢ ‚úÖ <strong>Verluste sofort verrechenbar</strong> mit anderen Eink√ºnften
                    <br>‚Ä¢ ‚úÖ <strong>Flexible Gewinnverteilung</strong> m√∂glich
                    <br>‚Ä¢ ‚ö†Ô∏è <strong>Finanzierung √ºber Kapitalkonto</strong> (keine Gesellschafterdarlehen mehr)
                    <br><br><strong>Reine VV GmbH (Kapitalgesellschaft):</strong>
                    <br>‚Ä¢ ‚ùå <strong>NIEMALS steuerfrei</strong> bei Immobilienverk√§ufen
                    <br>‚Ä¢ ‚ùå <strong>Doppelbesteuerung:</strong> ~30% GmbH + ~26% Aussch√ºttung = ~48-50%
                    <br>‚Ä¢ ‚ùå <strong>Verluste "gefangen"</strong> in der Gesellschaft
                    <br>‚Ä¢ ‚ùå <strong>Starre Gewinnverteilung</strong> nach Beteiligungsquoten
                    <br>‚Ä¢ ‚ö†Ô∏è <strong>Gesellschafterdarlehen m√∂glich</strong> (aber Doppelbesteuerung bleibt)
                    <br><br><strong>üéØ Bei 150.000‚Ç¨ Gewinn nach 10+ Jahren:</strong>
                    <br>‚Ä¢ <strong>GmbH & Co. KG:</strong> 0‚Ç¨ Steuern = 150.000‚Ç¨ netto
                    <br>‚Ä¢ <strong>Reine GmbH:</strong> ~72.000‚Ç¨ Steuern = ~78.000‚Ç¨ netto
                    <br>‚Ä¢ <strong>üí∞ Vorteil GmbH & Co. KG: 72.000‚Ç¨ gespart + gewerbesteuerfrei!</strong>
                </div>

                <div class="warning" style="background: #fff3cd; border-color: #ffeaa7; color: #856404; margin-top: 20px;">
                    üìã <strong>Differenzierte Betrachtung der Einbringung und des Verkaufs:</strong>
                    <br><br><strong>1. Einbringung von PRIVATVERM√ñGEN in GmbH:</strong>
                    <br>‚Ä¢ <strong>Nach 10 Jahren:</strong> Einbringung kann steuerfrei sein (¬ß 23 EStG)
                    <br>‚Ä¢ <strong>Unter 10 Jahren:</strong> Einbringung steuerpflichtig (Ver√§u√üerungsgewinn)
                    <br>‚Ä¢ <strong>Nach Einbringung:</strong> Immobilie wird Betriebsverm√∂gen der GmbH
                    <br><br><strong>2. Einbringung von BETRIEBSVERM√ñGEN in GmbH:</strong>
                    <br>‚Ä¢ <strong>¬ß 20 UmwStG:</strong> Steuerneutrale Einbringung m√∂glich (Buchwertfortf√ºhrung)
                    <br>‚Ä¢ <strong>Steueraufschiebung</strong> - nicht Steuerbefreiung
                    <br>‚Ä¢ <strong>Thesaurierungspflicht</strong> unter bestimmten Voraussetzungen
                    <br><br><strong>3. Verkauf DURCH die GmbH (nach Einbringung):</strong>
                    <br>‚Ä¢ <strong>Immer steuerpflichtig:</strong> ~30% Gesellschaft + ~26% Aussch√ºttung = ~48-50%
                    <br>‚Ä¢ <strong>Keine Steuerfreiheit:</strong> ¬ß 23 EStG und ¬ß 8b KStG gelten nicht
                    <br>‚Ä¢ <strong>Betriebsverm√∂gen:</strong> Keine privaten Ver√§u√üerungsgesch√§fte mehr
                    <br><br><strong>üö® NEU 2024/2025 - Gesellschafterdarlehen:</strong>
                    <br>‚Ä¢ <strong>BFH-Urteil (I R 21/22):</strong> Gesellschafterdarlehen an GbRs steuerrechtlich nicht anerkannt
                    <br>‚Ä¢ <strong>Konfusion:</strong> Gl√§ubiger = Schuldner ‚Üí Forderung erlischt steuerrechtlich
                    <br>‚Ä¢ <strong>Alternative:</strong> Kapitalkonto-Finanzierung oder externe Gesellschafter
                    <br><br><strong>‚ö†Ô∏è Zus√§tzlich zu beachten:</strong>
                    <br>‚Ä¢ <strong>Grunderwerbsteuer</strong> bei Einbringung (Ausnahmen m√∂glich)
                    <br>‚Ä¢ <strong>Umsatzsteuer</strong> bei gewerblicher Vermietung
                    <br>‚Ä¢ <strong>Drei-Objekt-Grenze:</strong> Einzelfallw√ºrdigung seit 2024 verst√§rkt
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function formatCurrency(amount) {
        return new Intl.NumberFormat('de-DE', {
            style: 'currency',
            currency: 'EUR',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(amount);
    }

    function formatPercent(rate) {
        return (rate).toFixed(1) + '%';
    }

    function berechnen() {
        // Eingabewerte erfassen
        const kaufpreis = parseFloat(document.getElementById('kaufpreis').value) || 0;
        const verkaufspreis = parseFloat(document.getElementById('verkaufspreis').value) || 0;
        const nebenkostenKauf = parseFloat(document.getElementById('nebenkosten_kauf').value) || 0;
        const nebenkostenVerkauf = parseFloat(document.getElementById('nebenkosten_verkauf').value) || 0;
        const modernisierung = parseFloat(document.getElementById('modernisierung').value) || 0;
        const haltedauer = parseFloat(document.getElementById('haltedauer').value) || 0;
        const persSteuersatz = parseFloat(document.getElementById('persoenlicher_steuersatz').value) || 0;
        const kirchensteuer = parseFloat(document.getElementById('kirchensteuer').value) || 0;

        // Grundberechnungen
        const gesamtkosten = kaufpreis + nebenkostenKauf + modernisierung;
        const bruttogewinn = verkaufspreis - nebenkostenVerkauf - gesamtkosten;

        // Konstanten definieren
        const koerperschaftsteuer = 15;
        const soli = 5.5;
        const gesamtsteuersatz = persSteuersatz + (persSteuersatz * kirchensteuer / 100) + (persSteuersatz * soli / 100);
        const einbringungNach = parseFloat(document.getElementById('einbringung_nach_jahren').value) || 0;
        
        // Alle Strukturen berechnen
        const ergebnisse = [];

        // 1. Privatverkauf
        let steuer = 0;
        let steuerfrei = false;
        if (haltedauer >= 10) {
            steuerfrei = true;
            steuer = 0;
        } else {
            steuer = bruttogewinn * gesamtsteuersatz / 100;
        }
        ergebnisse.push({
            typ: 'Privatverkauf',
            bruttogewinn: bruttogewinn,
            steuer: steuer,
            nettogewinn: bruttogewinn - steuer,
            besonderheiten: steuerfrei ? 'Steuerfrei nach 10 Jahren' : 'Spekulationssteuer'
        });

        // 2. VV GbR
        ergebnisse.push({
            typ: 'VV GbR',
            bruttogewinn: bruttogewinn,
            steuer: steuer, // Gleich wie Privatverkauf
            nettogewinn: bruttogewinn - steuer,
            besonderheiten: steuerfrei ? 'Steuerfrei nach 10 Jahren (wie Privatverkauf)' : 'Transparente Besteuerung, Spekulationssteuer'
        });

        // 3. Gewerbliche GbR - KEINE 10-Jahres-Frist (gewerblich = Betriebseinnahmen)
        const gewerbesteuer = 14;
        const gewerbesteuerFreibetrag = 24500;
        const gewerbesteuerBasis = Math.max(0, bruttogewinn - gewerbesteuerFreibetrag);
        const gewerbesteuerBetrag = gewerbesteuerBasis * gewerbesteuer / 100;
        const anrechnungsbetrag = gewerbesteuerBetrag * 3.8;
        const einkommensteuerBasis = bruttogewinn - Math.min(anrechnungsbetrag, gewerbesteuerBetrag);
        const einkommensteuer = einkommensteuerBasis * gesamtsteuersatz / 100;
        const gesamtsteuerGewGbr = gewerbesteuerBetrag + einkommensteuer;

        ergebnisse.push({
            typ: 'Gewerbliche GbR',
            bruttogewinn: bruttogewinn,
            steuer: gesamtsteuerGewGbr,
            nettogewinn: bruttogewinn - gesamtsteuerGewGbr,
            besonderheiten: 'Gewerblich = KEINE 10-Jahres-Frist (¬ß23 EStG gilt nicht bei Betriebseinnahmen)'
        });

        // 4. VV GmbH - Verkauf durch GmbH (nach Einbringung)
        const gstBasisVV = Math.max(0, bruttogewinn - gewerbesteuerFreibetrag);
        const gstBetragVV = gstBasisVV * gewerbesteuer / 100;
        const kstBasisVV = bruttogewinn - gstBetragVV;
        const kstBetragVV = kstBasisVV * koerperschaftsteuer / 100;
        const soliVV = kstBetragVV * 5.5 / 100;
        const gesamtsteuerVV = gstBetragVV + kstBetragVV + soliVV;
        const nettoGewinnGmbhVV = bruttogewinn - gesamtsteuerVV;
        const abgeltungsteuerVV = nettoGewinnGmbhVV * 26.375 / 100;
        
        let besonderheitVV = '‚ùå NIEMALS steuerfrei! Doppelbesteuerung: ~30% GmbH + ~26% Aussch√ºttung';
        if (einbringungNach > 0 && einbringungNach >= 10) {
            besonderheitVV = `‚úÖ Einbringung nach ${einbringungNach} Jahren war steuerfrei, ‚ùå aber Verkauf durch GmbH = Doppelbesteuerung`;
        } else if (einbringungNach > 0) {
            besonderheitVV = `‚ùå Einbringung nach ${einbringungNach} Jahren war steuerpflichtig, Verkauf auch = Doppelbesteuerung`;
        }
        
        ergebnisse.push({
            typ: 'VV GmbH',
            bruttogewinn: bruttogewinn,
            steuer: gesamtsteuerVV + abgeltungsteuerVV,
            nettogewinn: nettoGewinnGmbhVV - abgeltungsteuerVV,
            besonderheiten: besonderheitVV
        });

        // 5. Gewerbliche GmbH  
        const gstBetragGew = bruttogewinn * gewerbesteuer / 100;
        const kstBasisGew = bruttogewinn - gstBetragGew;
        const kstBetragGew = kstBasisGew * koerperschaftsteuer / 100;
        const soliGew = kstBetragGew * 5.5 / 100;
        const gesamtsteuerGew = gstBetragGew + kstBetragGew + soliGew;
        const nettoGewinnGmbhGew = bruttogewinn - gesamtsteuerGew;
        const abgeltungsteuerGew = nettoGewinnGmbhGew * 26.375 / 100;
        
        ergebnisse.push({
            typ: 'Gewerbliche GmbH',
            bruttogewinn: bruttogewinn,
            steuer: gesamtsteuerGew + abgeltungsteuerGew,
            nettogewinn: nettoGewinnGmbhGew - abgeltungsteuerGew,
            besonderheiten: 'KEINE ¬ß 8b KStG Teilfreistellung bei gewerblicher T√§tigkeit!'
        });

        // 6. VV GmbH & Co. KG - Transparente Besteuerung, 10-Jahres-Frist gilt, NEU: Gewerbesteuerbefreiung
        if (haltedauer >= 10) {
            ergebnisse.push({
                typ: 'VV GmbH & Co. KG',
                bruttogewinn: bruttogewinn,
                steuer: 0,
                nettogewinn: bruttogewinn,
                besonderheiten: 'üèÜ STEUERFREI nach 10 Jahren + BFH 2025: Gewerbesteuerbefreiung f√ºr "aufw√§rts abgef√§rbte" Strukturen!'
            });
        } else {
            // NEU: Gewerbesteuerbefreiung f√ºr rein verm√∂gensverwaltende "aufw√§rts abgef√§rbte" Strukturen
            const steuerVVKGOhneGewSt = bruttogewinn * gesamtsteuersatz / 100;
            ergebnisse.push({
                typ: 'VV GmbH & Co. KG',
                bruttogewinn: bruttogewinn,
                steuer: steuerVVKGOhneGewSt,
                nettogewinn: bruttogewinn - steuerVVKGOhneGewSt,
                besonderheiten: '‚≠ê BFH 2025: GEWERBESTEUERFREI als "aufw√§rts abgef√§rbte" Struktur + wird nach 10 Jahren komplett steuerfrei!'
            });
        }

        // 7. Gewerbliche GmbH & Co. KG - KEINE 10-Jahres-Frist (gewerblich)
        ergebnisse.push({
            typ: 'Gew. GmbH & Co. KG',
            bruttogewinn: bruttogewinn,
            steuer: gesamtsteuerGewGbr,
            nettogewinn: bruttogewinn - gesamtsteuerGewGbr,
            besonderheiten: 'Gewerblich = KEINE 10-Jahres-Frist, aber Gewerbesteueranrechnung'
        });

        // 8. VV UG - Verkauf durch UG (nach Einbringung)
        const gstBasisUG = Math.max(0, bruttogewinn - gewerbesteuerFreibetrag);
        const gstBetragUG = gstBasisUG * gewerbesteuer / 100;
        const kstBasisUG = bruttogewinn - gstBetragUG;
        const kstBetragUG = kstBasisUG * koerperschaftsteuer / 100;
        const soliUG = kstBetragUG * 5.5 / 100;
        const gesamtsteuerUG = gstBetragUG + kstBetragUG + soliUG;
        const nettoGewinnUG = bruttogewinn - gesamtsteuerUG;
        
        const thesaurierungsbedarf = Math.max(0, 25000 - 1);
        const thesaurierung = Math.min(nettoGewinnUG * 0.25, thesaurierungsbedarf);
        const ausschuettbareGewinnUG = nettoGewinnUG - thesaurierung;
        const abgeltungsteuerUG = ausschuettbareGewinnUG * 26.375 / 100;
        
        let besonderheitUG = '‚ùå NIEMALS steuerfrei! Doppelbesteuerung + 25% Thesaurierungspflicht';
        if (einbringungNach > 0 && einbringungNach >= 10) {
            besonderheitUG = `‚úÖ Einbringung nach ${einbringungNach} Jahren war steuerfrei, ‚ùå aber Verkauf durch UG = Doppelbesteuerung + Thesaurierung`;
        } else if (einbringungNach > 0) {
            besonderheitUG = `‚ùå Einbringung nach ${einbringungNach} Jahren war steuerpflichtig, Verkauf auch = Doppelbesteuerung + Thesaurierung`;
        }
            
        ergebnisse.push({
            typ: 'VV UG',
            bruttogewinn: bruttogewinn,
            steuer: gesamtsteuerUG + abgeltungsteuerUG,
            nettogewinn: ausschuettbareGewinnUG - abgeltungsteuerUG + thesaurierung,
            besonderheiten: besonderheitUG
        });

        // Ergebnisse anzeigen
        zeigeErgebnisse(ergebnisse);
    }

    function zeigeErgebnisse(ergebnisse) {
        const resultsGrid = document.getElementById('results-grid');
        const comparisonTable = document.getElementById('comparison-table');
        const comparisonBody = document.getElementById('comparison-body');

        // Beste Option ermitteln
        const besteOption = ergebnisse.reduce((beste, aktuelle) => 
            aktuelle.nettogewinn > beste.nettogewinn ? aktuelle : beste
        );

        // Ergebniskarten erstellen
        resultsGrid.innerHTML = '';
        
        ergebnisse.forEach(option => {
            const isBest = option.typ === besteOption.typ;
            const card = document.createElement('div');
            card.className = `result-card ${isBest ? 'best-option' : ''}`;
            
            card.innerHTML = `
                <h3>${option.typ} ${isBest ? 'üèÜ' : ''}</h3>
                <div class="result-item">
                    <span class="result-label">Bruttogewinn:</span>
                    <span class="result-value">${formatCurrency(option.bruttogewinn)}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Steuern gesamt:</span>
                    <span class="result-value negative">${formatCurrency(option.steuer)}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Nettogewinn:</span>
                    <span class="result-value">${formatCurrency(option.nettogewinn)}</span>
                </div>
                <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px; font-size: 0.9em; color: #6c757d;">
                    ${option.besonderheiten}
                </div>
            `;
            
            resultsGrid.appendChild(card);
        });

        // Vergleichstabelle aktualisieren
        comparisonBody.innerHTML = '';
        ergebnisse.forEach(option => {
            const isBest = option.typ === besteOption.typ;
            const row = document.createElement('tr');
            if (isBest) row.className = 'best-option';
            
            row.innerHTML = `
                <td><strong>${option.typ}</strong></td>
                <td>${formatCurrency(option.nettogewinn)}</td>
                <td>${formatCurrency(option.steuer)}</td>
                <td>${formatPercent(option.steuer / option.bruttogewinn * 100)}</td>
                <td style="font-size: 0.8em;">${option.besonderheiten}</td>
            `;
            
            comparisonBody.appendChild(row);
        });

        comparisonTable.style.display = 'table';
    }

    // Initiale Berechnung beim Laden
    window.onload = function() {
        berechnen();
    };

    // Automatische Neuberechnung bei Eingabe√§nderungen
    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', berechnen);
    });
</script>
```

</body>
</html>
